(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{59:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(48),i=n.n(r),l=(n(59),n(4)),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},o=n(54),d=n(16),u=n(7),m=n(5),j=n(12),b=n.p+"static/media/creditcard.016cd1bb.svg",h=n.p+"static/media/applepay.fae6f981.svg",f=n.p+"static/media/bancontact.921db2e7.svg",x=n.p+"static/media/belfius.dfbe78b7.svg",O=n.p+"static/media/directdebit.6895c23f.svg",p=n.p+"static/media/eps.71ff7225.svg",g=n.p+"static/media/giftcard.5e62d0b7.svg",v=n.p+"static/media/giropay.724c4b56.svg",N=n.p+"static/media/ideal.bc642320.svg",k=n.p+"static/media/inghomepay.384d661a.svg",y=n.p+"static/media/kbc.de7808bb.svg",C=n.p+"static/media/klarna.51b040f6.svg",w=n.p+"static/media/mybank.279fc0c1.svg",S=n.p+"static/media/paypal.bf79cb69.svg",A=n.p+"static/media/paysafecard.9c58ede9.svg",I=n.p+"static/media/Przelewy24.9dff65a7.svg",M=n.p+"static/media/sofort.0634a619.svg",_=n.p+"static/media/Voucher.aae7b29c.svg",B=n(0),z=function(e){var t;return alert("".concat(e.mollie.description,"\n\n")+"".concat(e.duringCheckout?"!! Zahlung vor Bestellabschluss !!\n\n":"")+"Status: ".concat(e.mollie.status,"\n")+(e.api?"API: ".concat(e.api,"\n"):"")+"".concat(e.components?"Components: ".concat(e.components,"\n"):"")+"".concat(e.dueDays?"G\xfcltigkeit: ".concat(e.dueDays," Tage\n"):"")+"".concat(e.mollie.minimumAmount?"Minimum: ".concat(e.mollie.minimumAmount.value," ").concat(e.mollie.minimumAmount.currency,"\n"):"")+"".concat(e.mollie.maximumAmount?"Maximum: ".concat(e.mollie.maximumAmount.value," ").concat(e.mollie.maximumAmount.currency,"\n"):"")+"".concat(e.shipping?(t=e.shipping).length?"Versandarten:\n"+t.map((function(e){return" - "+e.cName})).join("\n")+"\n\n":"":""))},L=function(e){var t=void 0;switch(e){case"paid":case"authorized":case"completed":t="green";break;case"created":case"pending":t="gray";break;case"open":case"shipping":case"refunded":t="blue";break;case"canceled":t="orange";break;case"expired":case"failed":t="red"}return Object(B.jsx)(l.Label,{className:"inline",color:t,children:e})},D=function(e){var t=e.method,n=Object(l.usePluginInfo)();if(n.endpoint){var a=n.endpoint.substring(0,n.endpoint.lastIndexOf("/"))+"/app/build",c={applepay:h,bancontact:f,belfius:x,creditcard:b,directdebit:O,eps:p,giftcard:g,giropay:v,ideal:N,inghomepay:k,kbc:y,klarna:C,mybank:w,paypal:S,paysafecard:A,Przelewy24:I,przelewy24:I,sofort:M,voucher:_};switch(t){case"applepay":case"bancontact":case"belfius":case"creditcard":case"directdebit":case"eps":case"giftcard":case"giropay":case"ideal":case"inghomepay":case"kbc":case"mybank":case"paypal":case"paysafecard":case"Przelewy24":case"przelewy24":case"sofort":case"voucher":return Object(B.jsx)("img",{className:"inline",src:a+c[t],title:t,alt:t});case"klarnasliceit":case"klarnapaylater":return Object(B.jsx)("img",{className:"inline",src:a+c.klarna,title:t,alt:t});case"banktransfer":return Object(B.jsx)("img",{className:"inline",src:a+c.directdebit,title:t,alt:t})}}return Object(B.jsx)("pre",{children:t})};var P=n(13),R=n(51),F=n(9),T=n(2),E=n(11),Z=n(3),K=function(e){var t=e.mollie,n={id:{header:function(){return"ID"},data:function(e){var t;return Object(B.jsx)(E.a,{target:"_blank",color:"blue",href:null===(t=e._links.dashboard)||void 0===t?void 0:t.href,children:e.id})}},status:{header:function(){return"Status"},data:function(e){return L(e.status)}},method:{header:function(){return"Methode"},data:function(e){return e.method}},amount:{header:function(){return"Betrag"},data:function(e){return Object(l.formatAmount)(e.amount.value,2,e.amount.currency)}},settlement:{header:function(){return"Settlement"},data:function(e){var t;return(null===(t=e.settlementAmount)||void 0===t?void 0:t.value)?Object(l.formatAmount)(e.settlementAmount.value,2,e.settlementAmount.currency):"-"}},refunded:{header:function(){return"Refunded"},data:function(e){var t;return(null===(t=e.amountRefunded)||void 0===t?void 0:t.value)?Object(l.formatAmount)(e.amountRefunded.value,2,e.amountRefunded.currency):"-"}},remaining:{header:function(){return"Remaining"},data:function(e){var t;return(null===(t=e.amountRemaining)||void 0===t?void 0:t.value)?Object(l.formatAmount)(e.amountRemaining.value,2,e.amountRemaining.currency):"-"}},details:{header:function(){return"Details"},data:function(e){return Object(B.jsx)("pre",{style:{fontSize:"9px"},children:JSON.stringify(e.details,null,2)})}},actions:{header:function(){return" "},data:function(e){return e._links.changePaymentState?Object(B.jsx)(E.a,{href:e._links.changePaymentState.href,target:"_blank",children:Object(B.jsx)(T.a,{icon:Z.j})}):""}}};return Object(B.jsx)(j.a,{striped:!0,template:n,items:t._embedded.payments})},V=n(52),J=n.n(V),q=function(e){var t,n,a,c=e.mollie;return Object(B.jsx)("table",{className:"w-full my-2",children:Object(B.jsxs)("tbody",{children:[Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Mollie ID:"}),Object(B.jsx)("td",{children:Object(B.jsx)(E.a,{target:"_blank",color:"blue",href:null===(t=c._links.dashboard)||void 0===t?void 0:t.href,children:c.id})}),Object(B.jsx)("th",{children:"Mode:"}),Object(B.jsx)("td",{children:c.mode}),Object(B.jsx)("th",{children:"Status:"}),Object(B.jsx)("td",{children:L(c.status)})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Betrag:"}),Object(B.jsx)("td",{children:Object(l.formatAmount)(c.amount.value,2,c.amount.currency)}),Object(B.jsx)("th",{children:"Captured:"}),Object(B.jsx)("td",{children:c.amountCaptured?Object(l.formatAmount)(c.amountCaptured.value,2,c.amountCaptured.currency):"-"}),Object(B.jsx)("th",{children:"Refunded:"}),Object(B.jsx)("td",{children:c.amountRefunded?Object(l.formatAmount)(c.amountRefunded.value,2,c.amountRefunded.currency):"-"})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Method:"}),Object(B.jsx)("td",{children:c.method}),Object(B.jsx)("th",{children:"Locale:"}),Object(B.jsx)("td",{children:c.locale}),Object(B.jsx)("th",{children:"Erstellt:"}),Object(B.jsxs)("td",{children:[J()(c.createdAt).format("Do MMM YYYY, HH:mm:ss")," Uhr"]})]}),Object(B.jsxs)("tr",{children:[c.billingAddress?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("th",{children:"Kunde:"}),Object(B.jsxs)("td",{children:[c.billingAddress.title," ",c.billingAddress.givenName," ",c.billingAddress.familyName]})]}):null,Object(B.jsx)("th",{children:"Zahlungslink:"}),Object(B.jsx)("td",{colSpan:3,children:(null===(n=c._links.checkout)||void 0===n?void 0:n.href)?Object(B.jsx)(E.a,{target:"_blank",color:"red",href:null===(a=c._links.checkout)||void 0===a?void 0:a.href,children:c._links.checkout.href}):"-"})]})]})})},U=function(e){var t=e.mollie,n={id:{header:function(){return"ID"},data:function(e){var t;return null!==(t=e.id)&&void 0!==t?t:"-"}},status:{header:function(){return"Status"},data:function(e){return e.status?L(e.status):"-"},align:"center"},sku:{header:function(){return"SKU"},data:function(e){return e.sku}},name:{header:function(){return"Name"},data:function(e){var t,n,a,c;return Object(B.jsxs)(B.Fragment,{children:[null!==(t=e.name)&&void 0!==t?t:"-",(null===(n=e.metadata)||void 0===n||null===(a=n.properties)||void 0===a?void 0:a.length)?null===(c=e.metadata)||void 0===c?void 0:c.properties.map((function(e){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("br",{}),Object(B.jsx)("b",{children:e.name}),": ",Object(B.jsx)("i",{children:e.value})]})})):null]})}},type:{header:function(){return"Typ"},data:function(e){return e.type?function(e){switch(e){case"physical":case"digital":return Object(B.jsx)(l.Label,{className:"inline",color:"blue",children:e});case"discount":case"store_credit":case"gift_card":return Object(B.jsx)(l.Label,{className:"inline",color:"green",children:e});default:return Object(B.jsx)(l.Label,{className:"inline",color:"orange",children:e})}}(e.type):"-"},align:"center"},quantity:{header:function(){return"Anzahl"},data:function(e){var t;return null!==(t=e.quantity)&&void 0!==t?t:"-"},align:"center"},vatRate:{header:function(){return"MwSt."},data:function(e){return"".concat(parseFloat(e.vatRate),"%")},align:"center"},vatAmount:{header:function(){return"Steuer"},data:function(e){return Object(l.formatAmount)(e.vatAmount.value,2,e.vatAmount.currency)},align:"right"},netto:{header:function(){return"Netto"},data:function(e){return Object(l.formatAmount)(e.totalAmount.value-e.vatAmount.value,2,e.totalAmount.currency)},align:"right"},brutto:{header:function(){return"Brutto"},data:function(e){return Object(B.jsx)("b",{children:Object(l.formatAmount)(e.totalAmount.value,2,e.totalAmount.currency)})},align:"right"}};return Object(B.jsx)(j.a,{template:n,items:t.lines})},W=n(8),Y=function(e){var t=e.mollie,n=e.kBestellung,c=Object(l.useAPI)(),r=Object(a.useState)(null),i=Object(m.a)(r,2),s=i[0],o=i[1],d=Object(a.useCallback)((function(){o(null),c.run("orders","shipments",{kBestellung:n}).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)}))}),[c,n]);Object(a.useEffect)((function(){d()}),[d]);if(!s)return Object(B.jsx)("p",{children:"Loading..."});if(!s.length)return Object(B.jsx)("p",{children:"No shipments!"});var u={lsNr:{header:function(){return"LieferscheinNr"},data:function(e){var n;return e.shipment?Object(B.jsx)(E.a,{color:"green",href:null===(n=t._links.dashboard)||void 0===n?void 0:n.href,target:"_blank",children:e.cLieferscheinNr}):e.cLieferscheinNr}},shipmentId:{header:function(){return"Shipment ID"},data:function(e){var t,n;return(null===(t=e.shipment)||void 0===t?void 0:t.cShipmentId)?null===(n=e.shipment)||void 0===n?void 0:n.cShipmentId:"-"}},carrier:{header:function(){return"Carrier"},data:function(e){var t;return(null===(t=e.shipment)||void 0===t?void 0:t.cCarrier)?e.shipment.cCarrier:"n/a"}},code:{header:function(){return"Code"},data:function(e){var t,n,a;return(null===(t=e.shipment)||void 0===t?void 0:t.cCode)?Object(B.jsx)(E.a,{color:"blue",target:"_blank",href:null===(n=e.shipment)||void 0===n?void 0:n.cUrl,children:null===(a=e.shipment)||void 0===a?void 0:a.cCode}):"n/a"}},actions:{header:function(){return" "},align:"right",data:function(e){var a=[];return"completed"!==t.status&&null===e.shipment&&a.push(Object(B.jsx)(W.a,{title:"synchronize",onClick:function(){return a=e.kLieferschein,void c.run("shipments","sync",{kLieferschein:a,orderId:t.id,kBestellung:n}).then((function(e){e.data.error?alert(e.data.error.message):(d(),console.log(e))})).catch((function(e){alert(e.message)}));var a},children:Object(B.jsx)(T.a,{icon:Z.q})})),e.cUrl&&a.push(Object(B.jsx)(W.a,{children:Object(B.jsx)(T.a,{icon:Z.o})})),Object(B.jsx)(B.Fragment,{children:a})}}};return Object(B.jsx)(j.a,{striped:!0,template:u,items:s})},G=function(e){var t=e.data,n={kId:{header:function(){return"ID"},data:function(e){return e.kId}},cType:{header:function(){return"Typ"},data:function(e){return e.cType}},cResult:{header:function(){return"Result"},data:function(e){var t;return Object(B.jsx)("pre",{children:null!==(t=e.cResult)&&void 0!==t?t:"n/a"})}},dDone:{header:function(){return"Status"},data:function(e){return e.dDone?"DONE":"PENDING"},align:"center"},dCreated:{header:function(){return"Erstellt"},data:function(e){return e.dCreated},align:"right"}};return Object(B.jsx)("div",{children:t.length?Object(B.jsx)(j.a,{template:n,items:t}):Object(B.jsx)("div",{children:"Keine Daten"})})},H=function(e){var t,n=e.mollie,a={id:{header:function(){return"ID"},data:function(e){return Object(B.jsx)("pre",{children:e.id})}},status:{header:function(){return"Status"},data:function(e){return L(e.status)}},description:{header:function(){return"Description"},data:function(e){return e.description}},amount:{header:function(){return"Amount"},data:function(e){return Object(l.formatAmount)(e.amount.value,2,e.amount.currency)}},created:{header:function(){return"Created"},data:function(e){return e.createdAt}}};return(null===(t=n._embedded)||void 0===t?void 0:t.refunds)?Object(B.jsx)(j.a,{striped:!0,template:a,items:n._embedded.refunds}):Object(B.jsx)(B.Fragment,{children:"No Data!"})},Q=function(e){var t,n,c,r,i,s,o,d,u=Object(a.useState)(null),j=Object(m.a)(u,2),b=j[0],h=j[1],f=Object(a.useState)(null),x=Object(m.a)(f,2),O=x[0],p=x[1],g=Object(a.useState)(!1),v=Object(m.a)(g,2),N=v[0],k=v[1],y=Object(a.useState)(!1),C=Object(m.a)(y,2),w=C[0],S=C[1],A=Object(a.useState)(!1),I=Object(m.a)(A,2),M=I[0],_=I[1],z=Object(a.useState)(!1),L=Object(m.a)(z,2),D=L[0],E=L[1],V=Object(a.useState)(!1),J=Object(m.a)(V,2),W=J[0],Q=J[1],X=Object(P.a)(),$=Object(a.useCallback)((function(){p(null),h(null),e.id&&(k(!0),X.run("orders","one",{id:e.id}).then((function(e){console.log(e.data),h(e.data),p(null)})).catch(p).finally((function(){return k(!1)})))}),[X,e.id]);return Object(a.useEffect)($,[$]),null!==O?Object(B.jsxs)("div",{className:"relative flex-col mb-3 rounded-md w-full",children:[Object(B.jsxs)("div",{className:"flex-row bg-black p-3 rounded-md text-white font-bold text-2xl",children:[Object(B.jsxs)("div",{className:"flex-grow",children:["Bestellung: ",null===b||void 0===b?void 0:b.order.cBestellNr," (",Object(B.jsx)("pre",{className:"inline text-ws_gray-light",children:e.id}),")"]}),Object(B.jsx)("div",{onClick:$,className:"cursor-pointer mr-2",children:Object(B.jsx)(T.a,{icon:Z.q,spin:N,size:"sm"})}),Object(B.jsx)("div",{onClick:e.onClose,className:"cursor-pointer",children:Object(B.jsx)(T.a,{icon:Z.r})})]}),Object(B.jsxs)(R.a,{variant:"error",icon:{icon:F.b},children:['Fehler beim laden der Bestellung "',e.id,'": ',O.message]})]}):Object(B.jsx)("div",{className:"relative flex-col mb-3 rounded-md w-full",children:Object(B.jsxs)(l.Loading,{loading:N,className:"rounded-md",children:[Object(B.jsxs)("div",{className:"flex-row bg-black p-3 rounded-md text-white font-bold text-2xl",children:[Object(B.jsxs)("div",{className:"flex-grow",children:["Bestellung: ",Object(B.jsx)("span",{title:null===b||void 0===b?void 0:b.order.kBestellung,children:null===b||void 0===b?void 0:b.order.cBestellNr})," (",Object(B.jsx)("pre",{className:"inline text-ws_gray-light",children:e.id}),")"]}),Object(B.jsx)("div",{onClick:$,className:"cursor-pointer mr-2",children:Object(B.jsx)(T.a,{icon:Z.q,spin:N,size:"sm"})}),Object(B.jsx)("div",{onClick:e.onClose,className:"cursor-pointer",children:Object(B.jsx)(T.a,{icon:Z.r})})]}),Object(B.jsx)("div",{className:" rounded-md",children:b&&"payment"===b.mollie.resource?Object(B.jsxs)(B.Fragment,{children:[b&&b.mollie&&Object(B.jsx)(q,{mollie:b.mollie}),b&&b.mollie&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsxs)("h3",{className:"font-bold text-2xl mb-1 cursor-pointer",onClick:function(){return Q((function(e){return!e}))},children:["Refunds (",null===(t=b.mollie._embedded)||void 0===t||null===(n=t.refunds)||void 0===n?void 0:n.length,")",Object(B.jsx)(T.a,{className:" float-right",icon:W?Z.f:Z.g})]}),W?Object(B.jsx)(H,{mollie:b.mollie}):null]}),b&&b.logs&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsxs)("h3",{className:"font-bold text-2xl mb-1 cursor-pointer",onClick:function(){return S((function(e){return!e}))},children:["Log (",b.logs.length,")",Object(B.jsx)(T.a,{className:" float-right",icon:w?Z.f:Z.g})]}),w?Object(B.jsx)(G,{data:b.logs}):null]})]}):Object(B.jsxs)(B.Fragment,{children:[b&&b.mollie&&Object(B.jsx)(q,{mollie:b.mollie}),b&&b.mollie&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsx)("h3",{className:"font-bold text-2xl mb-1",children:"Positionen"}),Object(B.jsx)(U,{mollie:b.mollie})]}),b&&b.mollie&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsxs)("h3",{className:"font-bold text-2xl mb-1 cursor-pointer",onClick:function(){return E((function(e){return!e}))},children:["Zahlungen (",null===(c=b.mollie._embedded)||void 0===c||null===(r=c.payments)||void 0===r?void 0:r.length,")",Object(B.jsx)(T.a,{className:" float-right",icon:D?Z.f:Z.g})]}),D?Object(B.jsx)(K,{mollie:b.mollie}):null]}),b&&b.mollie&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsxs)("h3",{className:"font-bold text-2xl mb-1 cursor-pointer",onClick:function(){return Q((function(e){return!e}))},children:["Refunds (",null===(i=b.mollie._embedded)||void 0===i||null===(s=i.refunds)||void 0===s?void 0:s.length,")",Object(B.jsx)(T.a,{className:" float-right",icon:W?Z.f:Z.g})]}),W?Object(B.jsx)(H,{mollie:b.mollie}):null]}),b&&b.mollie&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsxs)("h3",{className:"font-bold text-2xl mb-1 cursor-pointer",onClick:function(){return _((function(e){return!e}))},children:["Lieferungen (",null===(o=b.mollie._embedded)||void 0===o||null===(d=o.shipments)||void 0===d?void 0:d.length,")",Object(B.jsx)(T.a,{className:" float-right",icon:M?Z.f:Z.g})]}),M&&b.bestellung?Object(B.jsx)(Y,{kBestellung:b.bestellung.kBestellung,mollie:b.mollie}):null]}),b&&b.logs&&Object(B.jsxs)("div",{className:"mt-4",children:[Object(B.jsxs)("h3",{className:"font-bold text-2xl mb-1 cursor-pointer",onClick:function(){return S((function(e){return!e}))},children:["Log (",b.logs.length,")",Object(B.jsx)(T.a,{className:" float-right",icon:w?Z.f:Z.g})]}),w?Object(B.jsx)(G,{data:b.logs}):null]})]})})]})})},X=n(53),$=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(m.a)(r,2),s=i[0],b=i[1],h=Object(a.useState)({}),f=Object(m.a)(h,2),x=f[0],O=f[1],p=Object(P.a)(),g=Object(l.usePluginInfo)(),v={cBestellNr:{header:function(){return"BestellNr"},data:function(e){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(E.a,{color:"blue",onClick:function(){return O((function(t){return t[e.cOrderId]?Object(u.a)({},t):Object(u.a)(Object(d.a)({},e.cOrderId,e.cBestellNr),t)}))},children:e.cBestellNr}),parseInt(e.bSynced)?null:Object(B.jsx)("abbr",{className:"cursor-help",title:"Nicht abholbar.",children:"*"})]})}},cOrderId:{header:function(){return"mollie ID"},data:function(e){return Object(B.jsxs)(B.Fragment,{children:[parseInt(e.bTest)?Object(B.jsx)(l.Label,{className:"inline mr-1",color:"red",children:"TEST"}):null,Object(B.jsx)("pre",{className:"inline",children:e.cOrderId})]})}},cStatus:{header:function(){return"mollie Status"},data:function(e){return L(e.fAmountRefunded===e.fAmount?"refunded":e.cStatus)},align:"center"},cJTLStatus:{header:function(){return"JTL Status"},data:function(e){return function(e){var t=void 0;switch("string"===typeof e?parseInt(e):e){case-1:t="red";break;case 1:case 2:t="orange";break;case 3:t="blue";break;case 4:case 5:t="green"}return Object(B.jsx)(l.Label,{color:t,className:"inline",children:Object(l.jtlStatus2text)("".concat(e))})}(e.cJTLStatus)},align:"center"},cLocale:{header:function(){return"Locale"},data:function(e){return e.cLocale}},cMethod:{header:function(){return"Methode"},data:function(e){return Object(B.jsx)(D,{method:e.cMethod})},align:"center"},fAmount:{header:function(){return"Betrag"},data:function(e){return Object(l.formatAmount)(e.fAmount)},align:"right"},cCurrency:{header:function(){return"W\xe4hrung"},data:function(e){return e.cCurrency}},dCreated:{header:function(){return"Erstellt"},data:function(e){return e.dCreated},align:"right"},actions:{header:function(){return""},data:function(e){return Object(B.jsxs)(B.Fragment,{children:[!parseInt(e.bSynced)&&Object(B.jsx)(W.a,{onClick:function(){return t=e.cOrderId,b(!0),void p.run("orders","fetchable",{id:t}).then((function(){return alert("Bitte Tabelle aktualisieren!")})).finally((function(){return b(!1)}));var t},title:"Abholbar machen",className:"mr-1",children:Object(B.jsx)(T.a,{icon:Z.s})}),!["paid","authorized","completed","pending"].includes(e.cStatus)&&parseInt(e.cJTLStatus)>0?Object(B.jsx)(W.a,{onClick:function(){return t=e.kId,b(!0),void p.run("orders","reminder",{id:t}).then((function(){return alert("E-Mail versendet.")})).catch(alert).finally((function(){return b(!1)}));var t},title:"Zahlungserinnerung "+(null!==e.dReminder?"erneut ":"")+"verschicken",className:"mr-1",children:null!==e.dReminder?Object(B.jsxs)("span",{className:"fa-layers fa-fw",children:[Object(B.jsx)(T.a,{icon:Z.k,inverse:!0,transform:"shrink-7"}),Object(B.jsx)(T.a,{icon:X.a,inverse:!0,transform:"grow-7"})]}):Object(B.jsx)(T.a,{icon:Z.k})}):null,Object(B.jsx)(W.a,{onClick:function(){return t=e.cOrderId,b(!0),void fetch(g.shopURL+"?mollie=1&id=".concat(t),{mode:"no-cors",method:"GET"}).then((function(){return fetch(g.shopURL,{mode:"no-cors"}).then((function(){return alert("Bitte Tabelle aktualisieren!")}))})).finally((function(){return b(!1)}));var t},title:"Simulate Webhook",children:Object(B.jsx)(T.a,{icon:Z.e})})]})},align:"right"}},N=Object(B.jsx)(j.a,{striped:!0,template:v,loading:s,onData:function(e,t){return b(!0),new Promise((function(n,a){p.run("orders","all",{query:"SELECT o.*, b.cStatus as cJTLStatus, b.cAbgeholt, b.cVersandartName, b.cZahlungsartName, b.fGuthaben, b.fGesamtsumme FROM xplugin_ws5_mollie_orders o JOIN tbestellung b ON b.kbestellung = o.kBestellung ORDER BY b.dErstellt DESC;",params:{":limit":t,":offset":e*t}}).then((function(e){c(e.data.maxItems),n(e.data.items)})).catch(a).finally((function(){return b(!1)}))}))},paginate:{maxPages:2,maxItems:n,itemsPerPage:10}});return Object(B.jsx)("div",{className:"relative container mx-auto",children:Object.keys(x).length>0?Object(B.jsx)("div",{className:"container bg-white p-1 mx-auto rounded-md",children:Object(B.jsx)(l.Tabs,{active:Object.keys(x).length,tabs:[{component:N,title:"\xdcbersicht",isDashboard:!1,color:"blue"}].concat(Object(o.a)(Object.keys(x).reverse().map((function(e,t){return{component:Object(B.jsx)(Q,{id:e,onClose:function(){return t=e,void O((function(e){if(e[t]){var n=Object(u.a)({},e);return delete n[t],n}return Object(u.a)({},e)}));var t}}),isDashboard:!1,title:x[e]}}))))})}):Object(B.jsx)("div",{className:"bg-white rounded-md p-1",children:N})})},ee=n.p+"static/media/mollie-dashboard.8d8e65e5.png",te=function(e){var t,n,a=e.method;return Object(B.jsx)("div",{style:{flexBasis:"33%"},children:Object(B.jsxs)("div",{className:"m-2 p-2 border-b",children:[a.paymentMethod&&parseInt(a.paymentMethod.nWaehrendBestellung)>0&&Object(B.jsx)(T.a,{className:"mr-4 ml-1 cursor-help",icon:F.c,color:"red",onClick:function(){return alert("Zahlung vor Bestellabschluss wird nicht unterst\xfctzt. Diese Zahlungsart wird nicht zur auswahl stehen.")},title:"Zahlung vor Bestellabschluss nicht unterst\xfctzt."}),Object(B.jsx)(D,{method:a.mollie.id})," ",a.mollie.description,Object(B.jsx)(T.a,{icon:Z.m,title:"Informationen anzeigen",size:"sm",className:"ml-2 cursor-help",onClick:function(){return z(a)}}),Object(B.jsxs)("div",{className:"float-right",children:[a.components?Object(B.jsx)(B.Fragment,{children:"S"===a.components||"Y"===a.components?Object(B.jsx)(T.a,{className:"ml-1 cursor-help",icon:Z.i,onClick:function(){return alert("Mollie Components sind aktiviert: "+("S"===a.components?"optional.":"obligatorisch."))},title:"Mollie Components enabled."+("S"===a.components?" (optional)":" (obligatorisch)"),color:"S"===a.components?"green":"blue"}):Object(B.jsx)(T.a,{className:"ml-1 cursor-help",icon:Z.i,onClick:function(){return alert("Mollie Components sind deaktiviert.")},color:"red",title:"Mollie Components disabled"})}):null,a.api&&"payment"===a.api?Object(B.jsx)(T.a,{className:"cursor-help ml-1",icon:Z.n,onClick:function(){return alert("Payment API ist aktiviert.")},title:"Payment API",color:"green"}):null,Object(B.jsx)(T.a,{icon:Z.o,onClick:function(){var e;return alert(a.shipping&&(null===(e=a.shipping)||void 0===e?void 0:e.length)?"Mit folgende Versandarten verkn\xfcpft:\n\n"+a.shipping.map((function(e){return" - "+e.cName})).join("\n"):"Mit keiner Versandart verkn\xfcpft!")},className:"cursor-help ml-1",color:a.shipping&&(null===(t=a.shipping)||void 0===t?void 0:t.length)?"green":"red",title:a.shipping&&(null===(n=a.shipping)||void 0===n?void 0:n.length)?a.shipping.map((function(e){return e.cName})).join(", "):"n/a"}),!1===a.paymentMethod?null:Object(B.jsx)("a",{title:"Einstellungen",href:a.settings,className:"ml-1",target:"_blank",rel:"noreferrer",children:Object(B.jsx)(T.a,{icon:Z.h})})]})]})},a.mollie.id)},ne=function(e){var t=e.method,n=[];return t.shipping.length||n.push("Keine Versandarten verkn\xfcpft."),t.paymentMethod||n.push("Keine Zahlungsart im Shop gefunden."),t.paymentMethod&&parseInt(t.paymentMethod.nWaehrendBestellung)>0&&n.push("Zahlung vor Bestellabschluss leider nicht m\xf6glich."),Object(B.jsx)("div",{style:{flexBasis:"33%"},children:Object(B.jsxs)("div",{className:"m-2 p-2 border-b",children:["activated"!==t.mollie.status?Object(B.jsx)(T.a,{className:"mr-4 ml-1 cursor-help",icon:F.f,color:"red",onClick:function(){return alert("Zahlungsart bei Mollie nicht aktiv.")},title:"Zahlungsart bei Mollie nicht aktiv."}):Object(B.jsx)(T.a,{className:"mr-4 ml-1 cursor-help",icon:F.c,color:"red",onClick:function(){return alert(n.join("\n"))},title:n.join(" ")}),Object(B.jsx)(D,{method:t.mollie.id})," ",Object(B.jsx)("span",{className:"activated"!==t.mollie.status?"text-red-400":"",children:t.mollie.description}),Object(B.jsx)(T.a,{icon:Z.m,title:"Informationen anzeigen",size:"sm",className:"ml-2 cursor-help",onClick:function(){return z(t)}}),Object(B.jsx)("div",{className:"float-right",children:!1===t.paymentMethod?null:Object(B.jsx)("a",{title:"Einstellungen",href:t.settings,className:"ml-1",target:"_blank",rel:"noreferrer",children:Object(B.jsx)(T.a,{icon:Z.h})})})]})},t.mollie.id)},ae=[{title:"Dashboard",isDashboard:!0,component:function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({}),i=Object(m.a)(r,2),s=i[0],o=i[1],j=Object(a.useState)({}),b=Object(m.a)(j,2),h=b[0],f=b[1],x=Object(a.useState)({methods:!1,statistics:!1}),O=Object(m.a)(x,2),p=O[0],g=O[1],v=Object(a.useState)(!0),N=Object(m.a)(v,2),k=N[0],y=N[1],C=Object(l.usePluginInfo)(),w=C.endpoint.substring(0,C.endpoint.lastIndexOf("/"))+"/app/build",S=Object(P.a)(),A=function(e,t){g((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(d.a)({},e,t))}))},I=Object(a.useCallback)((function(){A("methods",!0),S.run("mollie","methods").then((function(e){o(e.data),y(!1)})).catch(console.error).finally((function(){A("methods",!1)}))}),[S]),M=Object(a.useCallback)((function(){A("statistics",!0),S.run("mollie","statistics").then((function(e){return f(e.data)})).catch(console.error).finally((function(){return A("statistics",!1)}))}),[S]);Object(a.useEffect)((function(){I(),M()}),[M,I]);var _=[],z=[];return Object.keys(s).forEach((function(e){"activated"===s[e].mollie.status&&s[e].shipping.length&&s[e].paymentMethod&&parseInt(s[e].paymentMethod.nWaehrendBestellung)<=0?_.push(Object(B.jsx)(te,{method:s[e]})):z.push(Object(B.jsx)(ne,{method:s[e]}))})),Object(B.jsxs)("div",{className:"mx-2",children:[Object(B.jsxs)("div",{className:"mb-4 w-full bg-white rounded-md p-4 relative",children:[Object(B.jsx)(T.a,{onClick:I,spin:p.methods,icon:Z.q,size:"lg",className:"float-right cursor-pointer",title:"aktualisieren"}),k?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("img",{src:w+ee,alt:"Setup Assistant",className:"mx-auto"}),Object(B.jsx)(W.a,{onClick:function(){return window.location.href="https://ws-url.de/mollie-pay"},color:"green",className:"mx-auto block my-6",children:"Jetzt kostenlos Mollie Account anlegen!"})]}):Object(B.jsxs)("div",{className:"flex items-center my-3",children:[Object(B.jsx)("img",{src:"https://cdn.webstollen.de/plugins/ws_mollie_ws.svg",alt:"Plugin Icon",className:"mr-2 max-w-full",style:{maxWidth:"100px"}}),Object(B.jsxs)("div",{className:"text-xl",children:["Integireren Sie alle wichtigen",Object(B.jsx)("br",{}),"Zahlungsmethoden in k\xfcrzester zeit."]}),Object(B.jsx)("div",{children:Object(B.jsxs)(W.a,{onClick:function(){var e;return null===(e=window.open("https://mollie.com/dashboard","_blank"))||void 0===e?void 0:e.focus()},className:"mx-8",children:["Mollie Dashboard ",Object(B.jsx)(T.a,{icon:Z.l})]})})]}),Object(B.jsxs)(l.Loading,{loading:p.methods,children:[z.length>0&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("b",{children:"Zahlungsarten mit Problemen:"}),Object(B.jsx)("div",{className:"flex flex-wrap content-center justify-start flex-row mb-4",children:z})]}),_.length>0&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("b",{children:"Aktive Zahlungsarten:"}),Object(B.jsx)("div",{className:"flex flex-wrap content-center justify-start flex-row mb-4",children:_})]})]}),Object(B.jsxs)("div",{className:"text-right",children:[Object(B.jsxs)(E.a,{className:"text-xs",onClick:function(){return c((function(e){return!e}))},children:["Legende ",n?"ausblenden":"anzeigen"]}),n?Object(B.jsx)("div",{className:"m-2 p-2",children:Object(B.jsxs)("ul",{children:[Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"red",icon:F.f,title:"Konfigurationsfehler bei Mollie"})," = Konfigurationsfehler bei Mollie"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"red",size:"xs",icon:F.c,title:"Konfigurationsfehler im Shop"})," = Konfigurationsfehler im Shop"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"red",size:"xs",icon:Z.o,title:"Keine Versandarten verbunden"})," = Keine Versandarten verbunden"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"green",size:"xs",icon:Z.o,title:"Versandarten verbunden"})," = Versandarten verbunden"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"red",size:"xs",icon:Z.i,title:"Mollie Components deaktiviert"})," = Mollie Components deaktiviert"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"blue",size:"xs",icon:Z.i,title:"Mollie Components aktiviert (obligatorisch)"})," = Mollie Components aktiviert (obligatorisch)"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"green",size:"xs",icon:Z.i,title:"Mollie Components aktiviert (optional)"})," = Mollie Components aktiviert (optional)"]}),Object(B.jsxs)("li",{className:"text-xs",children:[Object(B.jsx)(T.a,{color:"green",size:"xs",icon:Z.n,title:"Payment API aktiviert"})," = Payment API aktiviert"]})]})}):null]}),Object(B.jsx)(W.a,{onClick:function(){return window.location.href="versandarten.php"},color:"blue",className:"mx-auto block my-6",children:"Zu den Versandarten"})]}),Object(B.jsxs)("div",{className:"flex flex-row mb-3",children:[Object(B.jsxs)("div",{className:"bg-white rounded-md flex-1 p-4 mr-2 relative",children:[Object(B.jsx)(T.a,{onClick:M,spin:p.statistics,icon:Z.q,size:"lg",className:"float-right cursor-pointer",title:"aktualisieren"}),Object(B.jsx)("b",{children:"Mollie Ums\xe4tze:"}),Object(B.jsx)(l.Loading,{loading:p.statistics,children:Object(B.jsxs)("div",{className:"flex flex-row justify-around items-baseline place-items-center my-5",children:[h.day&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:Object(l.formatAmount)(h.day.amount,2,"\u20ac")}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last day"})]}),h.week&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:Object(l.formatAmount)(h.week.amount,2,"\u20ac")}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last week"})]}),h.month&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:Object(l.formatAmount)(h.month.amount,2,"\u20ac")}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last month"})]}),h.year&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:Object(l.formatAmount)(h.year.amount,2,"\u20ac")}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last year"})]})]})})]}),Object(B.jsxs)("div",{className:"bg-white rounded-md flex-1 p-4 ml-2 relative",children:[Object(B.jsx)(T.a,{onClick:M,spin:p.statistics,icon:Z.q,size:"lg",className:"float-right cursor-pointer",title:"aktualisieren"}),Object(B.jsx)("b",{children:"Mollie Transaktionen:"}),Object(B.jsx)(l.Loading,{loading:p.statistics,children:Object(B.jsxs)("div",{className:"flex flex-row justify-around items-baseline place-items-center my-5",children:[h.day&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:h.day.transactions}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last day"})]}),h.week&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:h.week.transactions}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last week"})]}),h.month&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:h.month.transactions}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last month"})]}),h.year&&Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("div",{className:"font-semibold",children:h.year.transactions}),Object(B.jsx)("div",{className:"text-ws_gray-normal text-sm",children:"last year"})]})]})})]})]})]})}},{title:"Bestellungen",isDashboard:!1,component:$}];i.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(l.App,{tabs:ae})}),document.getElementById("root")),s()}},[[85,1,2]]]);
//# sourceMappingURL=main.14cf30f5.chunk.js.map